<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caleb Hotels - Reviews</title>
    <link rel="stylesheet" href="../styles.css">
</head>
<body>
    <header>
        <div class="logo">
            <img src="../Images/Logo.png" alt="Caleb Hotels Logo">
        </div>
        <nav>
            <ul>
                <li><a href="../index.html">Home</a></li>
                <li><a href="CalebHotels.html">Caleb Hotels</a></li> <!-- Updated link -->
            </ul>
        </nav>
    </header>

    <main>
        <section class="review-form">
            <h2>Leave a Review</h2>
            <form id="reviewForm">
                <label for="name">Name:</label>
                <input type="text" id="name" name="name" required>

                <label>Rating:</label>
                <div class="star-rating">
                    <input type="radio" id="star5" name="rating" value="5">
                    <label for="star5">★</label>
                    <input type="radio" id="star4" name="rating" value="4">
                    <label for="star4">★</label>
                    <input type="radio" id="star3" name="rating" value="3">
                    <label for="star3">★</label>
                    <input type="radio" id="star2" name="rating" value="2">
                    <label for="star2">★</label>
                    <input type="radio" id="star1" name="rating" value="1">
                    <label for="star1">★</label>
                </div>

                <label for="review">Review:</label>
                <textarea id="review" name="review" required></textarea>

                <button type="submit">Submit Review</button>
            </form>
        </section>

        <section class="previous-reviews">
            <h2>Previous Reviews</h2>
            <div id="reviewsList">
                <!-- Reviews will be dynamically inserted here -->
            </div>
        </section>
    </main>

    <footer>
        <br>
        <p>Created by Caleb D.</p>
        <p class="hidden-text">E-1218</p>
    </footer>

    <script>
        // JavaScript to handle form submission and display reviews
        document.getElementById('reviewForm').addEventListener('submit', function (event) {
            event.preventDefault();

            // Get form data
            const name = document.getElementById('name').value;
            const rating = document.querySelector('input[name="rating"]:checked').value;
            const review = document.getElementById('review').value;
            const date = new Date().toLocaleDateString();

            // Create review object
            const reviewData = {
                name,
                rating,
                review,
                date
            };

            // Save to Google Sheets (see previous instructions for setup)
            saveReviewToGoogleSheets(reviewData);

            // Display the review on the page
            displayReview(reviewData);

            // Clear the form
            document.getElementById('reviewForm').reset();
        });

        function displayReview(reviewData) {
            const reviewsList = document.getElementById('reviewsList');

            const reviewItem = document.createElement('div');
            reviewItem.classList.add('review-item');

            reviewItem.innerHTML = `
                <h3>${reviewData.name}</h3>
                <div class="stars">${'★'.repeat(reviewData.rating)}</div>
                <p>${reviewData.review}</p>
                <div class="date">${reviewData.date}</div>
            `;

            reviewsList.prepend(reviewItem); // Add new review to the top
        }

        async function saveReviewToGoogleSheets(reviewData) {
            const url = 'YOUR_GOOGLE_APPS_SCRIPT_URL'; // Replace with your Google Apps Script URL
            const response = await fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(reviewData),
            });

            if (!response.ok) {
                console.error('Failed to save review to Google Sheets');
            }
        }
    </script>
</body>
</html>